module.exports=[939868,a=>{"use strict";let b=(0,a.i(949041).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],939868)},849865,a=>{"use strict";let b=(0,a.i(949041).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],849865)},719655,866474,a=>{"use strict";var b=a.i(949041);let c=(0,b.default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>c],719655);let d=(0,b.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>d],866474)},504432,a=>{"use strict";let b=(0,a.i(949041).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],504432)},997026,a=>{"use strict";let b=(0,a.i(949041).default)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);a.s(["Coins",()=>b],997026)},383661,35243,533674,a=>{"use strict";var b=class extends Error{constructor(a,b,c,d){super(a),this.code=b,this.statusCode=c,this.details=d,this.name="FacilitatorError"}},c=class extends b{constructor(a,b){super(a,"NETWORK_ERROR",void 0,b),this.name="NetworkError"}},d=class extends b{constructor(a,b){super(a,"VERIFICATION_ERROR",void 0,b),this.name="VerificationError"}},e=class extends b{constructor(a,b){super(a,"SETTLEMENT_ERROR",void 0,b),this.name="SettlementError"}};function f(a){return a.replace(/\/+$/,"")}function g(a){if(!a||"object"!=typeof a)return 1;let b=a.x402Version;if(void 0===b)return 1;if(1===b||2===b)return b;throw Error(`Unsupported x402 version: ${b}. SDK supports versions 1 and 2.`)}var h=class{constructor(a={}){this.supportedCache=null,this.supportedPromise=null,this.baseUrl=f(a.url??"https://pay.openfacilitator.io"),this.timeout=a.timeout??3e4,this.headers={"Content-Type":"application/json",...a.headers}}get url(){return this.baseUrl}async verify(a,c){try{let b=g(a);return await this.request("/verify",{method:"POST",body:JSON.stringify({x402Version:b,paymentPayload:a,paymentRequirements:c})})}catch(a){if(a instanceof b)throw a;throw new d(`Verification failed: ${a instanceof Error?a.message:"Unknown error"}`,a)}}async settle(a,c){try{let b=g(a);return await this.request("/settle",{method:"POST",body:JSON.stringify({x402Version:b,paymentPayload:a,paymentRequirements:c})})}catch(a){if(a instanceof b)throw a;throw new e(`Settlement failed: ${a instanceof Error?a.message:"Unknown error"}`,a)}}async supported(){try{return await this.request("/supported",{method:"GET"})}catch(a){if(a instanceof b)throw a;throw new c(`Failed to fetch supported networks: ${a instanceof Error?a.message:"Unknown error"}`,a)}}async health(){try{return await this.supported(),!0}catch{return!1}}async getFeePayer(a){for(let b of(await this.getSupportedCached()).kinds)if((b.network===a||b.network.includes(a)||a.includes(b.network))&&b.extra?.feePayer)return b.extra.feePayer}async getFeePayerMap(){let a=await this.getSupportedCached(),b={};for(let c of a.kinds)c.extra?.feePayer&&(b[c.network]=c.extra.feePayer);return b}async getSupportedCached(){return this.supportedCache?this.supportedCache:(this.supportedPromise||(this.supportedPromise=this.supported().then(a=>(this.supportedCache=a,this.supportedPromise=null,a))),this.supportedPromise)}clearCache(){this.supportedCache=null,this.supportedPromise=null}async request(a,d){var e;let g=(e=this.baseUrl,`${f(e)}${a}`),h=new AbortController,i=setTimeout(()=>h.abort(),this.timeout);try{let a=await fetch(g,{...d,headers:{...this.headers,...d.headers},signal:h.signal});if(clearTimeout(i),!a.ok){let c=`HTTP ${a.status}`;try{let b=await a.json();c=b.error||b.message||c}catch{}throw new b(c,"HTTP_ERROR",a.status)}return await a.json()}catch(a){if(clearTimeout(i),a instanceof b)throw a;if(a instanceof Error&&"AbortError"===a.name)throw new c(`Request timeout after ${this.timeout}ms`);throw new c(`Request failed: ${a instanceof Error?a.message:"Unknown error"}`,a)}}};let i={USDC:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",DRAKIN:"0xd8ba99F5bef09561ad9510ec67d9D17A3d2e238F",KOBOLDS:"0x8a6d3bb6091ea0dd8b1b87c915041708d11f9d3a"},j={"ai-research":{usd:.01,tokens:{DRAKIN:1e3,KOBOLDS:1e3}},analytics:{usd:.05,tokens:{DRAKIN:5e3,KOBOLDS:5e3}},consulting:{usd:.25,tokens:{DRAKIN:25e3,KOBOLDS:25e3}},"security-audit":{usd:.1,tokens:{DRAKIN:1e4,KOBOLDS:1e4}},"vault-setup":{usd:.05,tokens:{DRAKIN:5e3,KOBOLDS:5e3}}},k="https://pay.openfacilitator.io";new h({url:k});let l=[{symbol:"USDC",name:"USD Coin",address:i.USDC,decimals:6,discount:0,color:"#2775CA"},{symbol:"DRAKIN",name:"DRAKIN",address:i.DRAKIN,decimals:18,discount:.1,color:"#FF6B35"},{symbol:"KOBOLDS",name:"KOBOLDS",address:i.KOBOLDS,decimals:18,discount:.1,color:"#8B5CF6"}];function m(a){let b=l.find(b=>b.symbol===a);return b||l[0]}function n(a,b){let c=j[a];if(!c)return{amount:0,usdValue:0,discountApplied:0,displayText:"$0"};if("USDC"===b)return c.usd<1?{amount:c.usd,usdValue:c.usd,discountApplied:0,displayText:`${(100*c.usd).toFixed(0)}\xa2`}:{amount:c.usd,usdValue:c.usd,discountApplied:0,displayText:`$${c.usd.toFixed(2)}`};let d=c.tokens[b]||0,e=.9*c.usd;return{amount:d,usdValue:e,discountApplied:.1,displayText:`${d.toLocaleString()} ${b} (~$${e.toFixed(2)})`}}function o(a,b){let c=j[a],d=i[b]||i.USDC;return{scheme:"exact",network:"eip155:8453",amount:"USDC"===b?(1e6*c.usd).toFixed(0):(1e18*(c.tokens[b]||0)).toString(),asset:d,payTo:"0xc406fFf2Ce8b5dce517d03cd3531960eb2F6110d",maxTimeoutSeconds:300}}a.s(["FACILITATOR_URL",0,k,"NETWORK_ID",0,"eip155:8453","SERVICE_PRICING",0,j,"SUPPORTED_TOKENS",0,l,"calculateDisplayAmount",()=>n,"createPaymentRequirements",()=>o,"getTokenConfig",()=>m],383661);var p=a.i(949041);let q=(0,p.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>q],35243);let r=(0,p.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>r],533674)},166680,a=>{"use strict";let b=(0,a.i(949041).default)("badge-percent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);a.s(["BadgePercent",()=>b],166680)},864323,437158,a=>{"use strict";var b=a.i(829869),c=a.i(786710),d=a.i(903063),e=a.i(74845),f=a.i(719655),g=a.i(866474),h=a.i(939868),i=a.i(504432),j=a.i(849865),k=a.i(997026),l=a.i(383661),m=a.i(35243),n=a.i(533674),o=a.i(166680);function p({selectedToken:a,onSelect:d,service:e}){let[f,g]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>g(!f),className:"w-full flex items-center justify-between p-3 bg-shell-800 border border-shell-700 rounded-lg hover:border-crab-700 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q,{symbol:a}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-white",children:a}),(0,b.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:(0,l.calculateDisplayAmount)(e,a).displayText})]})]}),(0,b.jsx)(n.ChevronDown,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-shell-800 border border-shell-700 rounded-lg shadow-xl z-50 overflow-hidden",children:l.SUPPORTED_TOKENS.map(c=>{let f=(0,l.calculateDisplayAmount)(e,c.symbol),h=a===c.symbol;return(0,b.jsxs)("button",{onClick:()=>{d(c.symbol),g(!1)},className:`w-full flex items-center justify-between p-3 hover:bg-shell-700 transition-colors ${h?"bg-crab-950/30":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q,{symbol:c.symbol}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-white",children:c.symbol}),c.discount>0&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-neon-mint/20 text-neon-mint text-xs rounded-full",children:[(0,b.jsx)(o.BadgePercent,{className:"w-3 h-3"}),"SAVE 10%"]})]}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[f.displayText,c.discount>0&&(0,b.jsxs)("span",{className:"text-neon-mint ml-1",children:["(~$",f.usdValue.toFixed(3),")"]})]})]})]}),h&&(0,b.jsx)(m.Check,{className:"w-4 h-4 text-crab-400"})]},c.symbol)})})]})}function q({symbol:a}){let c=l.SUPPORTED_TOKENS.find(b=>b.symbol===a);return"USDC"===a?(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#2775CA] flex items-center justify-center text-white text-xs font-bold",children:"U"}):"DRAKIN"===a?(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#FF6B35] flex items-center justify-center text-white text-xs font-bold",children:"D"}):"KOBOLDS"===a?(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#8B5CF6] flex items-center justify-center text-white text-xs font-bold",children:"K"}):(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:c?.color||"#666"},children:a[0]})}function r({service:a,onSuccess:m,onError:n,buttonText:o,showTokenSelector:q=!0}){let{address:r,isConnected:s}=(0,d.useAccount)(),t=(0,e.useChainId)(),[u,v]=(0,c.useState)("USDC"),[w,x]=(0,c.useState)("idle"),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),C=(0,l.calculateDisplayAmount)(a,u),D=(0,l.getTokenConfig)(u),E=async()=>{if(!s||!r){z("Please connect your wallet first"),x("error");return}if(8453!==t){z("Please switch to Base Mainnet (Chain ID: 8453)"),x("error");return}x("requesting"),z("");try{let b=(0,l.createPaymentRequirements)(a,u);console.log("Payment requirements:",b),x("signing"),Date.now()/1e3,Array.from(crypto.getRandomValues(new Uint8Array(32))).map(a=>a.toString(16).padStart(2,"0")).join(""),D.address,b.payTo,BigInt(b.amount),x("settling");let c=await fetch("/api/payment/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:a,token:u,amount:b.amount,asset:D.address,payer:r,network:l.NETWORK_ID})});if(!c.ok){let a=await c.json();throw Error(a.message||"Payment processing failed")}let d=await c.json();B(d.transactionHash||"0x"+Math.random().toString(16).slice(2,34)),x("success"),m?.({transactionHash:d.transactionHash||"simulated",amount:C.displayText,token:u,service:a,discountApplied:C.discountApplied>0?"10%":void 0})}catch(a){console.error("Payment error:",a),x("error"),z(a instanceof Error?a.message:"Payment failed"),n?.(a instanceof Error?a:Error("Payment failed"))}};return"success"===w?(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 p-4 bg-green-950/30 border border-green-700 rounded-lg",children:[(0,b.jsx)(h.CheckCircle,{className:"w-5 h-5 text-neon-mint"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-white",children:"Payment Complete!"}),A&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 font-mono truncate max-w-[200px]",children:[A.slice(0,10),"...",A.slice(-8)]})]})]})}):(0,b.jsxs)("div",{className:"space-y-3",children:[q&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-400",children:"Pay with"}),(0,b.jsx)(p,{service:a,selectedToken:u,onSelect:v}),C.discountApplied>0&&(0,b.jsxs)("p",{className:"text-xs text-neon-mint flex items-center gap-1",children:[(0,b.jsx)(k.Coins,{className:"w-3 h-3"}),"Save 10% when paying with ",u,"!",(0,b.jsxs)("span",{className:"text-gray-500",children:["(was $",l.SERVICE_PRICING[a].usd.toFixed(2),")"]})]})]}),(0,b.jsxs)("button",{onClick:E,disabled:"idle"!==w,className:(()=>{let a="btn-retro w-full flex items-center justify-center gap-2";switch(w){case"success":return`${a} bg-green-600 border-green-500`;case"error":return`${a} bg-crab-700 border-crab-600`;default:return a}})(),children:[(()=>{switch(w){case"requesting":case"signing":case"settling":return(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"});case"success":return(0,b.jsx)(h.CheckCircle,{className:"w-4 h-4 text-neon-mint"});case"error":return(0,b.jsx)(i.AlertCircle,{className:"w-4 h-4 text-crab-400"});default:return(0,b.jsx)(g.Zap,{className:"w-4 h-4"})}})(),(0,b.jsx)("span",{children:(()=>{switch(w){case"requesting":return"Requesting...";case"signing":return"Sign in wallet...";case"settling":return"Processing...";case"success":return"Payment Successful!";case"error":return"Payment Failed";default:return o||`Pay ${C.displayText}`}})()})]}),"error"===w&&y&&(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-crab-950/50 border border-crab-700 rounded-lg",children:[(0,b.jsx)(i.AlertCircle,{className:"w-4 h-4 text-crab-400 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm text-crab-300",children:y})]}),!s&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-shell-800 rounded-lg text-sm text-gray-400",children:[(0,b.jsx)(f.Wallet,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Connect wallet to complete payment"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2",children:[(0,b.jsx)("span",{children:"Powered by OpenFacilitator x402"}),(0,b.jsx)("span",{children:l.FACILITATOR_URL.replace("https://","")})]})]})}a.s(["TokenSelector",()=>p],437158),a.s(["X402Payment",()=>r],864323)}];

//# sourceMappingURL=apps_services_4080890b._.js.map